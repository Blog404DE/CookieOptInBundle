class NcoiExternalMedia{constructor(b){this.$=b}addOnClickEvent(h){let a=this.$,b=this;a(document).on("click",".ncoi---release",function(c){c.preventDefault();//Um richtige Chechbox zu finden
//und um Blockcontainer vielleicht auszublenden und iFrame anzuh√§ngen
let d=a(this).parents(".ncoi---blocked"),i=d.find(".ncoi---sliding"),j=a("[data-block-class=\""+i.data("block-class")+"\"]");if(i.prop("checked")){j.prop("checked",!0).trigger("change");let c=i.data("block-class")+"",d=a("[data-block-class=\"ncoi---"+c+"\"]");d.prop("checked",!0).trigger("change");let e=new NcoiTrack(a);e.track(1,h),b.decode(h);let f=a("."+i.data("block-class"));f.each(function(){b.addIframe(a(this))})}else b.isCustomGmap(d)?b.showCustomGmap(d):(b.addIframe(d),d.trigger("change"))})}onChangeSliding(){let d=this.$;d(document).on("click",".ncoi---sliding.ncoi---blocked",function(){let a=d(this).prop("checked"),b=d(this).data("cookie-ids")+"";0<b.indexOf(",")?(b=b.split(","),b.forEach(function(b){d("#ncoi---table-cookie-"+b).prop("checked",a)})):d("#ncoi---table-cookie-"+b).prop("checked",a)})}decode(b){let h=this,c=h.$,a=new NcoiApp(c),e=a.getLocalStorage(b),d=e.cookieIds;c(".ncoi---blocked").each(function(b,e){let f=c(this);d.forEach(function(b){c(e).hasClass("ncoi---cookie-id-"+b)&&0<f.length&&(h.isCustomGmap(f)?h.showCustomGmap(f):(h.addIframe(f),f.trigger("change")))})})}showCustomGmap(){let b=this.$;b(".ce_google_map").removeClass("ncoi---hidden"),b(".mod_catalogUniversalView").removeClass("ncoi---hidden"),b(".ncoi---custom_gmap").addClass("ncoi---hidden")}isCustomGmap(a){let b=a.parent(".ncoi---custom_gmap");return 0<b.length}addIframe(c){let d=this.$;if(!c.hasClass("ncoi---hidden")){let b="";if(1<c.length)for(let a=0;a<c.length;a++)d("."+c[a].classList[3]).each(function(){b=d(this).find("script").text().trim()});else b=c.find("script").text().trim();c.addClass("ncoi---hidden"),0<=b.indexOf("data-only-script")?d("head").append(b):c.after(b)}}}
