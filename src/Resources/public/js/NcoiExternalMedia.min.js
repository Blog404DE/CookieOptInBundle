class NcoiExternalMedia{constructor(b){this.$=b}addOnClickEvent(b){let c=this.$,d=this;c(document).on("click",".ncoi---release",function(e){e.preventDefault();//Um richtige Chechbox zu finden
//und um Blockcontainer vielleicht auszublenden und iFrame anzuh√§ngen
let a=c(this).parents(".ncoi---blocked"),k=a.find(".ncoi---sliding"),f=c("[data-block-class=\""+k.data("block-class")+"\"]");if(k.prop("checked")){f.prop("checked",!0).trigger("change");let e=k.data("block-class")+"",g=c("[data-block-class=\"ncoi---"+e+"\"]");g.prop("checked",!0).trigger("change");let h=new NcoiTrack(c);h.track(1,b),d.decode(b);let i=c("."+k.data("block-class"));i.each(function(){d.addIframe(c(this))})}else d.isCustomGmap(a)?d.showCustomGmap(a):(d.addIframe(a),a.trigger("change"))})}onChangeSliding(){let b=this.$;b(document).on("click",".ncoi---sliding.ncoi---blocked",function(){let c=b(this).prop("checked"),d=b(this).data("cookie-ids")+"";0<d.indexOf(",")?(d=d.split(","),d.forEach(function(d){b("#ncoi---table-cookie-"+d).prop("checked",c)})):b("#ncoi---table-cookie-"+d).prop("checked",c)})}decode(c){let e=this,f=e.$,d=new NcoiApp(f),b=d.getLocalStorage(c),g=b.cookieIds;f(".ncoi---blocked").each(function(b,h){let d=f(this);g.forEach(function(b){f(h).hasClass("ncoi---cookie-id-"+b)&&0<d.length&&(e.isCustomGmap(d)?e.showCustomGmap(d):(e.addIframe(d),d.trigger("change")))})})}showCustomGmap(){let b=this.$;b(".ce_google_map").removeClass("ncoi---hidden"),b(".mod_catalogUniversalView").removeClass("ncoi---hidden"),b(".ncoi---custom_gmap").addClass("ncoi---hidden")}isCustomGmap(c){let a=c.parent(".ncoi---custom_gmap");return 0<a.length}addIframe(e){let c=this.$;if(!e.hasClass("ncoi---hidden")){let b="";if(1<e.length)for(let a=0;a<e.length;a++)c("."+e[a].classList[3]).each(function(){b=c(this).find("script").text().trim()});else b=e.find("script").text().trim();e.addClass("ncoi---hidden"),0<=b.indexOf("data-only-script")?c("head").append(b):e.after(b)}}}
