class NcoiExternalMedia{constructor(a){this.$=a}addOnClickEvent(c){let d=this.$,e=this;d(document).on("click",".ncoi---release",function(a){a.preventDefault();//Um richtige Chechbox zu finden
//und um Blockcontainer vielleicht auszublenden und iFrame anzuh√§ngen
let b=d(this).parents(".ncoi---blocked"),f=b.find(".ncoi---sliding"),g=d("[data-block-class=\""+f.data("block-class")+"\"]");if(f.prop("checked")){g.prop("checked",!0).trigger("change");let h=f.data("block-class")+"",i=d("[data-block-class=\"ncoi---"+h+"\"]");i.prop("checked",!0).trigger("change");let j=new NcoiTrack(d);j.track(1,c),e.decode(c);let a=d("."+f.data("block-class"));a.each(function(){e.addIframe(d(this))})}else e.isCustomGmap(b)?e.showCustomGmap(b):(e.addIframe(b),b.trigger("change"))})}onChangeSliding(){let c=this.$;c(document).on("click",".ncoi---sliding.ncoi---blocked",function(){let d=c(this).prop("checked"),a=c(this).data("cookie-ids")+"";0<a.indexOf(",")?(a=a.split(","),a.forEach(function(a){c("#ncoi---table-cookie-"+a).prop("checked",d)})):c("#ncoi---table-cookie-"+a).prop("checked",d)})}decode(e){let f=this,g=f.$,b=new NcoiApp(g),a=b.getLocalStorage(e),h=a.cookieIds;g(".ncoi---blocked").each(function(a,d){let c=g(this);h.forEach(function(a){g(d).hasClass("ncoi---cookie-id-"+a)&&0<c.length&&(f.isCustomGmap(c)?f.showCustomGmap(c):(f.addIframe(c),c.trigger("change")))})})}showCustomGmap(){let a=this.$;a(".ce_google_map").removeClass("ncoi---hidden"),a(".mod_catalogUniversalView").removeClass("ncoi---hidden"),a(".ncoi---custom_gmap").addClass("ncoi---hidden")}isCustomGmap(a){let b=a.parent(".ncoi---custom_gmap");return 0<b.length}addIframe(c){let d=this.$;if(!c.hasClass("ncoi---hidden")){let a="";if(1<c.length)for(let b=0;b<c.length;b++)d("."+c[b].classList[3]).each(function(){a=d(this).find("script").text().trim()});else a=c.find("script").text().trim();c.addClass("ncoi---hidden"),0<=a.indexOf("data-only-script")?d("head").append(a):c.after(a)}}}
